# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–∏—Å—Ç–µ–º–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Workflow

## –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è workflow –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Ç–∏–∫–µ—Ç–æ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –Ω–∏–º–∏, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª.

## –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üéØ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Å—Ç–∞—Ç—É—Å—ã
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤ —Å –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ü–≤–µ—Ç–æ–≤—ã—Ö —Å—Ö–µ–º –∏ –∏–∫–æ–Ω–æ–∫ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ (–æ—Ç–∫—Ä—ã—Ç—ã–µ, –∞–∫—Ç–∏–≤–Ω—ã–µ, –æ–∂–∏–¥–∞—é—â–∏–µ, —Ä–µ—à–µ–Ω–Ω—ã–µ, –∑–∞–∫—Ä—ã—Ç—ã–µ)
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ SLA –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ—Ç–≤–µ—Ç–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞

### üîÑ –ì–∏–±–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏ —Å —É—Å–ª–æ–≤–∏—è–º–∏
- –†–æ–ª–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è (–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –ø–æ —É—Å–ª–æ–≤–∏—è–º

### ‚ö° –°–∏—Å—Ç–µ–º–∞ —É—Å–ª–æ–≤–∏–π –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- –£—Å–ª–æ–≤–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–æ–ª–µ–π —Ç–∏–∫–µ—Ç–∞, —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö (–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π)
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ webhook'–æ–≤ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —É—Å–ª–æ–≤–∏–π —Å –ª–æ–≥–∏–∫–æ–π AND/OR

### üìä –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞—É–¥–∏—Ç
- –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π workflow
- –ü–æ–ª–Ω—ã–π –∞—É–¥–∏—Ç –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–∞—Ç–∞ –∫ –ø—Ä–µ–¥—ã–¥—É—â–∏–º –≤–µ—Ä—Å–∏—è–º
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

### üì§ –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç
- –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π workflow –≤ JSON
- –ò–º–ø–æ—Ä—Ç –≥–æ—Ç–æ–≤—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö workflow (ITIL, Agile, Custom)

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  WorkflowType   ‚îÇ    ‚îÇ WorkflowStatus  ‚îÇ    ‚îÇWorkflowTransition‚îÇ
‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
‚îÇ - name          ‚îÇ    ‚îÇ - name          ‚îÇ    ‚îÇ - name          ‚îÇ
‚îÇ - displayName   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ - displayName   ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ - displayName   ‚îÇ
‚îÇ - icon/color    ‚îÇ    ‚îÇ - icon/color    ‚îÇ    ‚îÇ - conditions    ‚îÇ
‚îÇ - isActive      ‚îÇ    ‚îÇ - category      ‚îÇ    ‚îÇ - actions       ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îÇ - slaHours      ‚îÇ    ‚îÇ - allowedRoles  ‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                       ‚îÇ
                       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                       ‚îÇWorkflowCondition‚îÇ    ‚îÇ WorkflowAction  ‚îÇ
                       ‚îÇ                 ‚îÇ    ‚îÇ                 ‚îÇ
                       ‚îÇ - conditionType ‚îÇ    ‚îÇ - actionType    ‚îÇ
                       ‚îÇ - operator      ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚î§ - actionConfig  ‚îÇ
                       ‚îÇ - expectedValue ‚îÇ    ‚îÇ - executionOrder‚îÇ
                       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

#### WorkflowType
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–∏–ø workflow (–∏–Ω—Ü–∏–¥–µ–Ω—Ç, –∑–∞–ø—Ä–æ—Å –Ω–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ, –∏–∑–º–µ–Ω–µ–Ω–∏–µ)
```javascript
{
  name: 'incident',
  displayName: { ru: '–ò–Ω—Ü–∏–¥–µ–Ω—Ç', en: 'Incident' },
  icon: 'alert-triangle',
  color: '#dc3545',
  isActive: true,
  isDefault: true
}
```

#### WorkflowStatus
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ —Ä–∞–º–∫–∞—Ö workflow
```javascript
{
  name: 'in_progress',
  displayName: { ru: '–í —Ä–∞–±–æ—Ç–µ', en: 'In Progress' },
  category: 'active',
  icon: 'play-circle',
  color: '#17a2b8',
  slaHours: 4,
  responseHours: 1,
  isInitial: false,
  isFinal: false
}
```

#### WorkflowTransition
–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥ –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏
```javascript
{
  name: 'start_work',
  displayName: { ru: '–ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É', en: 'Start Work' },
  fromStatusId: 'uuid-new-status',
  toStatusId: 'uuid-in-progress-status',
  requiresComment: false,
  requiresAssignment: true,
  allowedRoles: ['admin', 'agent']
}
```

## API Reference

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### –¢–∏–ø—ã Workflow
```http
GET    /api/workflow/types                    # –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–∏–ø—ã
POST   /api/workflow/types                    # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø
GET    /api/workflow/types/:id                # –ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –ø–æ ID
PUT    /api/workflow/types/:id                # –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø
```

#### –°—Ç–∞—Ç—É—Å—ã
```http
GET    /api/workflow/types/:id/statuses       # –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã —Ç–∏–ø–∞
POST   /api/workflow/types/:id/statuses       # –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—É—Å
PUT    /api/workflow/statuses/:id             # –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å
```

#### –ü–µ—Ä–µ—Ö–æ–¥—ã
```http
GET    /api/workflow/types/:id/transitions    # –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã —Ç–∏–ø–∞
POST   /api/workflow/types/:id/transitions    # –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥
GET    /api/workflow/tickets/:id/transitions  # –î–æ—Å—Ç—É–ø–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –¥–ª—è —Ç–∏–∫–µ—Ç–∞
POST   /api/workflow/tickets/:id/transitions/:transitionId/execute # –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏ –∞—É–¥–∏—Ç
```http
GET    /api/workflow/types/:id/stats          # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ workflow
GET    /api/workflow/tickets/:id/history      # –ò—Å—Ç–æ—Ä–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Ç–∏–∫–µ—Ç–∞
```

#### –ò–º–ø–æ—Ä—Ç/–≠–∫—Å–ø–æ—Ä—Ç
```http
GET    /api/workflow/types/:id/export         # –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
POST   /api/workflow/import                   # –ò–º–ø–æ—Ä—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ workflow
```javascript
const workflowType = await fetch('/api/workflow/types', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    name: 'custom_process',
    displayName: {
      ru: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—Ä–æ—Ü–µ—Å—Å',
      en: 'Custom Process'
    },
    description: {
      ru: '–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞',
      en: 'Process description'
    },
    icon: 'settings',
    color: '#6f42c1',
    isActive: true
  })
});
```

#### –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ —Å—Ç–∞—Ç—É—Å–∞
```javascript
const result = await fetch(`/api/workflow/tickets/${ticketId}/transitions/${transitionId}/execute`, {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' },
  body: JSON.stringify({
    comment: '–ù–∞—á–∏–Ω–∞—é —Ä–∞–±–æ—Ç—É –Ω–∞–¥ —Ç–∏–∫–µ—Ç–æ–º',
    assigneeId: 'user-uuid',
    context: {
      priority: 'high',
      department: 'IT'
    }
  })
});
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã

### 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
# –í—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é —Å—Ö–µ–º—ã workflow
node backend/scripts/init-workflow-db.js
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ workflow

```javascript
// –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ workflow
const workflowService = require('./src/services/workflowService');

// –°–æ–∑–¥–∞—Ç—å —Ç–∏–ø workflow
const workflowType = await workflowService.createWorkflowType({
  name: 'simple_task',
  displayName: { ru: '–ü—Ä–æ—Å—Ç–∞—è –∑–∞–¥–∞—á–∞', en: 'Simple Task' },
  icon: 'check-square',
  color: '#28a745'
}, adminUserId);

// –°–æ–∑–¥–∞—Ç—å —Å—Ç–∞—Ç—É—Å—ã
const statuses = [
  { name: 'todo', displayName: { ru: '–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é', en: 'To Do' }, isInitial: true },
  { name: 'doing', displayName: { ru: '–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è', en: 'Doing' } },
  { name: 'done', displayName: { ru: '–í—ã–ø–æ–ª–Ω–µ–Ω–æ', en: 'Done' }, isFinal: true }
];

// –°–æ–∑–¥–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã
const transitions = [
  { from: 'todo', to: 'doing', name: 'start' },
  { from: 'doing', to: 'done', name: 'complete' },
  { from: 'done', to: 'doing', name: 'reopen' }
];
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å–ª–æ–≤–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π

#### –£—Å–ª–æ–≤–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞
```javascript
// –£—Å–ª–æ–≤–∏–µ: —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω—ã –∏ –∞–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç –∑–∞–∫—Ä—ã–≤–∞—Ç—å —Ç–∏–∫–µ—Ç—ã
{
  conditionType: 'role',
  operator: 'in',
  expectedValue: '["admin", "agent"]'
}

// –£—Å–ª–æ–≤–∏–µ: —Ç–∏–∫–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω
{
  conditionType: 'field',
  fieldName: 'assignedToId',
  operator: 'is_not_empty'
}

// –£—Å–ª–æ–≤–∏–µ: –ø—Ä–æ—à–ª–æ –±–æ–ª–µ–µ 24 —á–∞—Å–æ–≤ —Å —Å–æ–∑–¥–∞–Ω–∏—è
{
  conditionType: 'time',
  fieldName: 'createdAt',
  operator: 'greater_than',
  expectedValue: '1440' // –º–∏–Ω—É—Ç—ã
}
```

#### –î–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ
```javascript
// –£–≤–µ–¥–æ–º–∏—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{
  actionType: 'notify',
  actionConfig: {
    recipients: ['assignee'],
    template: {
      subject: '–¢–∏–∫–µ—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω –≤–∞–º',
      body: '–í–∞–º –Ω–∞–∑–Ω–∞—á–µ–Ω —Ç–∏–∫–µ—Ç: {{ticket.title}}'
    }
  }
}

// –û–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª–µ
{
  actionType: 'update_field',
  actionConfig: {
    fieldName: 'priority',
    fieldValue: 'high'
  }
}

// –í—ã–∑–≤–∞—Ç—å webhook
{
  actionType: 'webhook',
  actionConfig: {
    url: 'https://api.example.com/webhook',
    headers: { 'Authorization': 'Bearer token' }
  }
}
```

## –ü—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —à–∞–±–ª–æ–Ω—ã

### 1. ITIL Incident Management
- **–°—Ç–∞—Ç—É—Å—ã**: New ‚Üí Assigned ‚Üí In Progress ‚Üí On Hold ‚Üí Resolved ‚Üí Closed
- **SLA**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
- **–≠—Å–∫–∞–ª–∞—Ü–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —ç—Å–∫–∞–ª–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–∏ SLA

### 2. Service Request Workflow
- **–°—Ç–∞—Ç—É—Å—ã**: Submitted ‚Üí Approved ‚Üí In Fulfillment ‚Üí Completed / Rejected
- **–£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –∑–∞–ø—Ä–æ—Å–æ–≤
- **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### 3. Change Management (ITIL)
- **–°—Ç–∞—Ç—É—Å—ã**: Draft ‚Üí Submitted ‚Üí Under Review ‚Üí Approved ‚Üí Scheduled ‚Üí In Implementation ‚Üí Implemented
- **CAB –ø—Ä–æ—Ü–µ—Å—Å**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º Change Advisory Board
- **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 4. Agile/Kanban
- **–°—Ç–∞—Ç—É—Å—ã**: Backlog ‚Üí To Do ‚Üí In Progress ‚Üí Review ‚Üí Done
- **–õ–∏–º–∏—Ç—ã WIP**: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á –≤ —Å—Ç–∞—Ç—É—Å–µ
- **–ú–µ—Ç—Ä–∏–∫–∏**: –í—Ä–µ–º—è —Ü–∏–∫–ª–∞, –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å

## –ú–∏–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã

### –ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö —Å—Ç–∞—Ç—É—Å–æ–≤**
   ```sql
   SELECT DISTINCT status FROM "Tickets";
   ```

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö workflow**
   - –°–æ–∑–¥–∞—Ç—å WorkflowType –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Ç–∏–∫–µ—Ç–∞
   - –°–æ–∑–¥–∞—Ç—å WorkflowStatus –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å—Ç–∞—Ç—É—Å–∞–º–∏

3. **–ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
   ```sql
   -- –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–∫–µ—Ç—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
   UPDATE "Tickets" SET 
     workflow_type_id = (SELECT id FROM workflow_types WHERE name = 'incident'),
     current_status_id = (SELECT id FROM workflow_statuses WHERE name = status);
   ```

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –ø–µ—Ä–µ—Ö–æ–¥—ã —Å—Ç–∞—Ç—É—Å–æ–≤
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —É—Å–ª–æ–≤–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é

### –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
```javascript
// backend/scripts/migrate-to-workflow.js
const { Ticket, WorkflowType, WorkflowStatus } = require('../src/models');

async function migrateTicketsToWorkflow() {
  // –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–∏–∫–µ—Ç—ã —Å —Å—Ç–∞—Ä—ã–º–∏ —Å—Ç–∞—Ç—É—Å–∞–º–∏
  const tickets = await Ticket.findAll();
  
  // –ü–æ–ª—É—á–∏—Ç—å workflow –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  const defaultWorkflow = await WorkflowType.findOne({ where: { isDefault: true } });
  
  for (const ticket of tickets) {
    // –ù–∞–π—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —Å—Ç–∞—Ç—É—Å –≤ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ
    const status = await WorkflowStatus.findOne({
      where: {
        workflowTypeId: defaultWorkflow.id,
        name: ticket.status
      }
    });
    
    if (status) {
      await ticket.update({
        workflowTypeId: defaultWorkflow.id,
        currentStatusId: status.id
      });
    }
  }
}
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞—Ä—É—à–µ–Ω–∏–π SLA
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–æ–≤ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

### –î–∞—à–±–æ—Ä–¥—ã
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É workflow
const stats = await fetch(`/api/workflow/types/${workflowTypeId}/stats?startDate=2024-01-01&endDate=2024-12-31`);

// –†–µ–∑—É–ª—å—Ç–∞—Ç:
{
  performance: {
    totalExecutions: 1250,
    avgDuration: 145, // –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã
    successRate: 98.4,
    errorRate: 1.6
  },
  statusDistribution: [
    { statusName: 'new', ticketCount: 45 },
    { statusName: 'in_progress', ticketCount: 123 },
    { statusName: 'resolved', ticketCount: 890 }
  ]
}
```

## –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ workflow
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ–Ω—è—Ç–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤
- –ú–∏–Ω–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –±–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É—Å–ª–æ–≤–∏–π
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —É—Å–ª–æ–≤–∏—è –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫—É —É—Å–ª–æ–≤–∏–π –¥–ª—è —Å–ª–æ–∂–Ω–æ–π –ª–æ–≥–∏–∫–∏
- –ò–∑–±–µ–≥–∞–π—Ç–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –ù–∞—á–∏–Ω–∞–π—Ç–µ —Å –ø—Ä–æ—Å—Ç—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π (—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ webhook'–∏ –≤ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–∫–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 4. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ò–Ω–¥–µ–∫—Å–∏—Ä—É–π—Ç–µ –ø–æ–ª—è, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ —É—Å–ª–æ–≤–∏—è—Ö
- –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤
- –ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ü–µ—Ä–µ—Ö–æ–¥ –Ω–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —É—Å–ª–æ–≤–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω—ã
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

2. **–î–µ–π—Å—Ç–≤–∏—è –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–µ–π—Å—Ç–≤–∏–π
   - –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏–π

3. **–ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ —É—Å–ª–æ–≤–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
   - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–µ–∫—Å—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
   - –û–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Å–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
```javascript
// –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
process.env.WORKFLOW_DEBUG = 'true';

// –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
const history = await fetch(`/api/workflow/tickets/${ticketId}/history?includeDetails=true`);
```

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è workflow –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –º–æ—â–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø–æ–∑–≤–æ–ª–∏—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å–ª—É–∂–±—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏ —É–ª—É—á—à–∏—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤.

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–º–æ—â–∏ –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å –∫ API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–ª–∏ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ issues –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.